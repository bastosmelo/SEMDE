<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro • Dashboard</title>

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Lucide icons -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@0.278.0/dist/lucide.min.js" defer></script>

  <link rel="stylesheet" href="css/cadastro.css">

</head>

<body>
  <div class="app">
    <!-- Dashboard -->
    <section class="dashboard" id="dashboardScreen">
      <!-- SIDEBAR -->
      <aside class="sidebar" role="navigation" aria-label="Navegação">
        <div class="profile">
          <img src="https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png" alt="perfil">
          <div>
            <h1 id="profileName">Usuário</h1>
            <small id="profileStatus">Online</small>
          </div>
        </div>

        <ul class="menu" role="menu" aria-label="Menu principal">
          <li><button class="menu-item" data-page="index"><i data-lucide="home"></i><span>Dashboard</span></button></li>
          <li><button class="menu-item" data-page="acoes"><i data-lucide="activity"></i><span>Ações</span></button></li>
          <li><button class="menu-item" data-page="tarefas"><i data-lucide="list"></i><span>Gestão de
                tarefas</span></button></li>
          <li><button class="menu-item" data-page="cadastro"><i
                data-lucide="user-plus"></i><span>Cadastro</span></button></li>
          <li><button class="menu-item" data-page="financeiro"><i
                data-lucide="dollar-sign"></i><span>Financeiro</span></button></li>
          <li><button class="menu-item" data-page="config"><i
                data-lucide="settings"></i><span>Configurações</span></button></li>
        </ul>

        <div class="sidebar-footer">
          <button id="themeToggle" class="menu-btn" aria-pressed="false"><i data-lucide="moon"></i><span
              id="themeLabel">Tema</span></button>
          <button id="logoutBtn" class="menu-btn" aria-pressed="false"><i
              data-lucide="log-out"></i><span>Sair</span></button>
        </div>
      </aside>

      <main class="main" id="mainContent">
        <div class="topbar">
          <div>
            <h2 style="margin-bottom:6px">Cadastro • Contatos</h2>
            <div style="color:var(--muted-2); font-size:13px">Cadastre novos contatos e gerencie informações</div>
          </div>

          <div style="display:flex; gap:12px; align-items:center">
            <div style="font-size:13px; color:var(--muted-2)">Token: <span id="tokenShort"
                style="font-weight:700; color:var(--text)">—</span></div>
            <button id="mobileMenuBtn" class="btn">Menu</button>
          </div>
        </div>

        <!-- Cards de estatísticas -->
        <section class="cards">
          <article class="card">
            <h4>Total de Contatos</h4>
            <div class="num" id="totalContacts">24</div>
          </article>
          <article class="card">
            <h4>Novos Hoje</h4>
            <div class="num" id="newToday">3</div>
          </article>
          <article class="card">
            <h4>Ativos</h4>
            <div class="num" id="activeContacts">18</div>
          </article>
          <article class="card">
            <h4>Cidades</h4>
            <div class="num" id="totalCities">8</div>
          </article>
        </section>

        <!-- Seção de Novo Cadastro (inicialmente oculta) -->
        <div id="novoCadastroSection" class="panel registry-section" style="display:none">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2>Novo Cadastro</h2>
            <button class="btn btn-outline" onclick="fecharNovoCadastro()">
              <i data-lucide="x"></i> Fechar
            </button>
          </div>

          <form id="formNovoCadastro">
            <div class="form-row">
              <div class="form-group">
                <label>Nome Completo *</label>
                <input type="text" id="nomeCompleto" placeholder="Digite o nome completo" required>
              </div>
              <div class="form-group">
                <label>Idade</label>
                <input type="number" id="idade" placeholder="Idade" min="0" max="120">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Sexo</label>
                <select id="sexo">
                  <option value="">Selecione</option>
                  <option>Masculino</option>
                  <option>Feminino</option>
                  <option>Outro</option>
                  <option>Prefiro não informar</option>
                </select>
              </div>
              <div class="form-group">
                <label>E-mail</label>
                <input type="email" id="email" placeholder="exemplo@email.com">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Celular *</label>
                <input type="tel" id="celular" placeholder="(79) 99999-9999" required
                  oninput="contactsManager.formatarTelefone(this)">
              </div>
              <div class="form-group">
                <label>Município *</label>
                <select id="municipio" required onchange="contactsManager.atualizarBairros(this.value)">
                  <option value="">Selecione o município</option>
                  <!-- Municípios de Sergipe serão carregados aqui -->
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Bairro *</label>
                <select id="bairro" required>
                  <option value="">Primeiro selecione o município</option>
                  <!-- Bairros serão carregados dinamicamente -->
                </select>
              </div>
              <div class="form-group">
                <label>Escolaridade</label>
                <select id="escolaridade">
                  <option value="">Selecione</option>
                  <option>Fundamental Incompleto</option>
                  <option>Fundamental Completo</option>
                  <option>Médio Incompleto</option>
                  <option>Médio Completo</option>
                  <option>Superior Incompleto</option>
                  <option>Superior Completo</option>
                  <option>Pós-graduação</option>
                  <option>Mestrado</option>
                  <option>Doutorado</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Assessor Parlamentar</label>
                <input type="text" id="assessor" placeholder="Nome do assessor">
              </div>
              <div class="form-group">
                <label>Assunto</label>
                <select id="assunto">
                  <option value="">Selecione o assunto</option>
                  <option>Reclamação</option>
                  <option>Sugestão</option>
                  <option>Elogio</option>
                  <option>Informação</option>
                  <option>Outro</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label>Observação</label>
              <textarea id="observacao" placeholder="Observações adicionais..."></textarea>
            </div>

            <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:20px;">
              <button type="button" class="btn btn-outline" onclick="fecharNovoCadastro()">Cancelar</button>
              <button type="submit" class="btn btn-primary">Salvar Cadastro</button>
            </div>
          </form>
        </div>

        <!-- Heat Map Section -->
        <div id="heatMapSection" class="panel map-section">
          <div class="map-header">
            <h2>Distribuição Geográfica</h2>
            <div class="map-controls">
              <button id="btnPontos" class="btn btn-primary"><i data-lucide="map-pin"></i> Pontos Individuais</button>
              <button id="btnBairros" class="btn btn-outline"><i data-lucide="layers"></i> Contadores por
                Bairro</button>
              <button id="btnCalor" class="btn btn-outline"><i data-lucide="thermometer"></i> Mapa de Calor</button>
            </div>
          </div>

          <div class="map-container">
            <div id="map"></div>
            <div id="mapLegend" class="map-legend hidden">
              <div><strong>Legenda</strong></div>
              <div id="legendContent"></div>
            </div>
          </div>
        </div>

        <!-- Contacts Table Section -->
        <div id="contactsTableSection" class="panel">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
            <h2>Lista de Contatos</h2>
            <div style="display:flex; gap:8px;">
              <button class="btn btn-primary" onclick="abrirNovoCadastro()">
                <i data-lucide="user-plus"></i> Novo Contato
              </button>
              <button class="btn btn-outline" onclick="exportContacts()">
                <i data-lucide="download"></i> Exportar
              </button>
            </div>
          </div>

          <div style="overflow-x: auto;">
            <table id="contactsTable">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>E-mail</th>
                  <th>Telefone</th>
                  <th>Cidade</th>
                  <th>Bairro</th>
                  <th>Status</th>
                  <th>Data Cadastro</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="contactsTableBody">
                <!-- Contatos serão carregados aqui -->
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </section>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Heatmap plugin -->
  <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

  <script src="js/cadastro.js"></script>

</body>

</html>