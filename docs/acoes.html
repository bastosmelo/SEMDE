<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ações • Dashboard</title>

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Lucide icons -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@0.278.0/dist/lucide.min.js" defer></script>

  <link rel="stylesheet" href="css/acoes.css">

</head>

<body>
  <div class="app">
    <!-- Dashboard -->
    <section class="dashboard" id="dashboardScreen">
      <!-- SIDEBAR -->
      <aside class="sidebar" role="navigation" aria-label="Navegação">
        <div class="profile">
          <img src="https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png" alt="perfil">
          <div>
            <h1 id="profileName">Usuário</h1>
            <small id="profileStatus">Online</small>
          </div>
        </div>

        <ul class="menu" role="menu" aria-label="Menu principal">
          <li><button class="menu-item" data-page="index"><i data-lucide="home"></i><span>Dashboard</span></button></li>
          <li><button class="menu-item" data-page="acoes"><i data-lucide="activity"></i><span>Ações</span></button></li>
          <li><button class="menu-item" data-page="tarefas"><i data-lucide="list"></i><span>Gestão de
                tarefas</span></button></li>
          <li><button class="menu-item" data-page="cadastro"><i
                data-lucide="user-plus"></i><span>Cadastro</span></button></li>
          <li><button class="menu-item" data-page="financeiro"><i
                data-lucide="dollar-sign"></i><span>Financeiro</span></button></li>
          <li><button class="menu-item" data-page="config"><i
                data-lucide="settings"></i><span>Configurações</span></button></li>
        </ul>

        <div class="sidebar-footer">
          <button id="themeToggle" class="menu-btn" aria-pressed="false"><i data-lucide="moon"></i><span
              id="themeLabel">Tema</span></button>
          <button id="logoutBtn" class="menu-btn" aria-pressed="false"><i
              data-lucide="log-out"></i><span>Sair</span></button>
        </div>
      </aside>

      <main class="main" id="mainContent">
        <div class="topbar">
          <div>
            <h2 style="margin-bottom:6px">Ações • Visão Geral</h2>
            <div style="color:var(--muted-2); font-size:13px">Gerencie e registre ações com rapidez — mapa e
              exportações.</div>
          </div>

          <div style="display:flex; gap:12px; align-items:center">
            <div style="font-size:13px; color:var(--muted-2)">Token: <span id="tokenShort"
                style="font-weight:700; color:var(--text)">—</span></div>
            <button id="mobileMenuBtn" class="btn btn-primary" style="width:auto; padding:8px 10px">Menu</button>
          </div>
        </div>

        <!-- Cards de estatísticas -->
        <section class="cards">
          <article class="card">
            <h4>Total de Ações</h4>
            <div class="num" id="totalActions">24</div>
          </article>
          <article class="card">
            <h4>Este Mês</h4>
            <div class="num" id="monthActions">8</div>
          </article>
          <article class="card">
            <h4>Cidades Ativas</h4>
            <div class="num" id="activeCities">4</div>
          </article>
          <article class="card">
            <h4>Bairros Cobertos</h4>
            <div class="num" id="coveredNeighborhoods">12</div>
          </article>
        </section>

        <!-- Map panel -->
        <section class="panel map-section">
          <div class="map-header">
            <h2>Mapa de ações</h2>
            <div class="map-controls">
              <button id="btnPontos" class="btn btn-outline"><i data-lucide="map-pin"></i> Pontos Individuais</button>
              <button id="btnBairros" class="btn btn-outline"><i data-lucide="layers"></i> Contadores por
                Bairro</button>
              <button id="btnCalor" class="btn btn-danger"><i data-lucide="thermometer"></i> Mapa de Calor</button>
            </div>
          </div>
          <div class="map-container">
            <div id="map"></div>
            <div id="mapLegend" class="map-legend hidden">
              <div><strong>Legenda</strong></div>
              <div id="legendContent"></div>
            </div>
          </div>
        </section>

        <!-- Registry panel -->
        <section class="panel registry-section">
          <div class="registry-header">
            <h2>Registro de Ações</h2>
            <div class="registry-controls">
              <button id="openNovaAcao" class="btn btn-primary"><i data-lucide="plus"></i> Nova Ação</button>
              <button id="exportPDF" class="btn btn-outline"><i data-lucide="file-text"></i> PDF</button>
              <button id="exportExcel" class="btn btn-outline"><i data-lucide="file"></i> Excel</button>
            </div>
          </div>
          <div class="table-container">
            <table class="actions-table" aria-describedby="tableDesc">
              <thead>
                <tr>
                  <th>Cidade</th>
                  <th>Bairro</th>
                  <th>Tipo da ação</th>
                  <th>Data</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="acoesTbody">
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </section>
  </div>

        <!-- Modal Nova Ação -->
          <div id="modalNovaAcao" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <div class="modal-content panel">
              <div class="modal-header">
                <h2 id="modalTitle">Nova Ação</h2>
                <span class="close" id="closeModal" title="Fechar">&#10005;</span>
              </div>

              <form id="formNovaAcao" class="modal-form" autocomplete="off">
                <div class="form-row">
                  <div class="form-group">
                    <label for="cidade">Cidade *</label>
                    <select id="cidade" name="cidade" required>
                      <option value="">Selecione uma cidade</option>
                      <!-- As opções serão preenchidas automaticamente pelo JavaScript -->
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="bairro">Bairro *</label>
                    <select id="bairro" name="bairro" required>
                      <option value="">Selecione um bairro</option>
                      <!-- Os bairros serão preenchidos conforme a cidade selecionada -->
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="tipoAcao">Tipo da Ação *</label>
                    <select id="tipoAcao" name="tipoAcao" required>
                      <option value="">Selecione o tipo</option>
                      <option>Reunião com lideranças</option>
                      <option>Evento</option>
                      <option>Visita Técnica</option>
                      <option>Caminhada</option>
                      <option>Panfletagem</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="dataAcao">Data da Ação *</label>
                    <input type="date" id="dataAcao" name="dataAcao" required>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group full-width">
                    <label for="descricao">Descrição</label>
                    <textarea id="descricao" name="descricao" rows="3" placeholder="Descreva os detalhes..."></textarea>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="responsavel">Responsável</label>
                    <input type="text" id="responsavel" name="responsavel" placeholder="Nome do responsável">
                  </div>
                  <div class="form-group">
                    <label for="contato">Contato</label>
                    <input type="tel" id="contato" name="contato" placeholder="(79) 99999-9999">
                  </div>
                </div>

                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:8px">
                  <button type="button" id="btnCancelar" class="btn btn-outline">Cancelar</button>
                  <button type="submit" class="btn btn-primary">Salvar Ação</button>
                </div>
              </form>
            </div>
          </div>

          <!-- Leaflet JS -->
          <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
          <!-- Heatmap plugin -->
          <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

          <script src="js/acoes.js"></script>

          <script src="ia/ia-loader.js"></script>

</body>

</html>